<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top-Down Shooter Framework - Alpha</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="global-header">
        <div class="header-section">
            <button id="global-back-btn" class="back-btn" onclick="engine.goBack()">‚Üê</button>
            <span class="header-label">CAREER</span>
            <span class="header-val"><span id="career-clears">0</span> Clears</span>
            <span class="header-val"><span id="career-destroys">0</span> Destroys</span>
            <span class="header-val"><span id="career-rate">0</span>% Achieve</span>
        </div>
        <div class="header-section main-title">INTERSTELLAR CARRIER</div>
        <div class="header-section">
            <button id="sound-toggle-btn" class="header-btn" onclick="engine.toggleSound()">üîä</button>
            <span class="header-label">CREDITS:</span>
            <span id="global-money" class="money-val">$0</span>
        </div>
    </div>

    <div id="main-layout-container">
        <!-- Â∑¶„Éë„Éç„É´Ôºö„Éü„ÉÉ„Ç∑„Éß„É≥„ÉªË∑ùÈõ¢„ÉªÂèñÂæóÁâ© -->
        <div id="gui-left-panel" class="side-panel">
            <div class="panel-header">CONTROL</div>
            <div style="padding: 10px; text-align: center;">
                <button id="retire-btn" onclick="engine.retireMission()">RETIRE</button>
            </div>

            <div class="panel-header">MISSION INFO</div>
            <div class="panel-content">
                <div id="mission-title" style="color: #fa0; font-weight: bold; margin-bottom: 5px;">-</div>
                <div id="mission-stars" style="color: #ff0; margin-bottom: 5px;"></div>
                <div>Weight: <span id="weight-val" class="val">0</span>.0</div>
                <div style="margin-top: 10px; border-top: 1px solid #444; padding-top: 5px;">
                    LOOT:<br>
                    <div id="loot-list-ingame" style="font-size: 0.8em; color: #0f0;"></div>
                </div>
            </div>
        </div>

        <div id="game-container">
            <canvas id="gameCanvas"></canvas>

            <!-- „Çø„Ç§„Éà„É´ÁîªÈù¢ -->
            <div id="title-screen" class="screen hide">
                <h1>INTERSTELLAR CARRIER</h1>
                <p>~ ÈÖçÈÄÅÊ•≠ËÄÖ„ÅØ„Å§„Çâ„ÅÑ„Çà ~</p>
                <button onclick="engine.changeState(GAME_STATE.MENU)">START GAME</button>
            </div>

            <!-- „É°„Ç§„É≥„É°„Éã„É•„Éº -->
            <div id="main-menu" class="screen hide">
                <h2>ËàπÂÜÖ„Çø„Éº„Éü„Éä„É´</h2>
                <div class="stats-info">
                    Units Waiting for Delivery...
                </div>
                <button onclick="engine.changeState(GAME_STATE.MISSION_SELECT)">‰æùÈ†º„ÇíÁ¢∫Ë™ç„Åô„Çã</button>
                <button onclick="engine.changeState(GAME_STATE.GRID_MODIFY)">Ëàπ‰Ωì„ÇíÊîπÈÄ†„Åô„Çã</button>
                <button onclick="engine.changeState(GAME_STATE.UPGRADE)">ËÉΩÂäõÂÄ§„ÇíÂº∑Âåñ„Åô„Çã</button>
                <button id="reset-save-btn">„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà</button>
            </div>

            <div id="upgrade-screen" class="screen hide">
                <h2>Ëàπ‰Ωì„Ç´„Çπ„Çø„Éû„Ç§„Ç∫</h2>
                <div id="upgrade-list"></div>
            </div>

            <div id="mission-select-screen" class="screen hide">
                <h2>Êú¨Êó•„ÅÆ‰æùÈ†º</h2>
                <div id="mission-list"></div>
            </div>

            <div id="grid-screen" class="screen hide">
                <h2>Ëàπ‰ΩìÊßãÊàêÂ§âÊõ¥</h2>
                <div id="grid-ui-layout">
                    <div id="grid-container-wrapper">
                        <div id="ship-grid" class="ship-grid"></div>
                        <div class="grid-controls">
                            <div id="sell-zone" class="sell-zone">Drag here to SELL</div>
                            <button onclick="engine.resetGrid()">ÂÖ®„É™„Çª„ÉÉ„Éà (50%ËøîÈáë)</button>
                        </div>
                    </div>
                    <div id="part-inventory-panel">
                        <div class="panel-header">ÂÄâÂ∫´ (WAREHOUSE)</div>
                        <div id="warehouse-list" class="warehouse-list"></div>
                        <div class="panel-header">„Éë„Éº„ÉÑ„Ç∑„Éß„ÉÉ„Éó</div>
                        <div id="part-list"></div>
                    </div>
                </div>
            </div>

            <!-- „Ç§„É≥„Ç≤„Éº„É†GUI („Ç™„Éº„Éê„Éº„É¨„Ç§) -->
            <div id="ingame-gui" class="gui-overlay hide">
                <div class="gui-top-left">
                    Ship HP: <div class="hp-bar-bg">
                        <div id="hp-bar-fill"></div>
                    </div>
                    Cargo HP: <div class="hp-bar-bg cargo">
                        <div id="cargo-bar-fill"></div>
                    </div>
                    <div id="hp-text">100 / 100</div>
                </div>

                <div class="gui-top-right">
                    Weather: <span id="weather-display">-</span>
                </div>

                <!-- „Ç≠„É£„É≥„Éê„ÇπÂÜÖ Âè≥‰∏ãÊÉÖÂ†± -->
                <div id="gui-canvas-info" class="canvas-bottom-right">
                    <div>DIST: <span id="dist-val">0</span>m</div>
                    <div>SPD: <span id="speed-val">0</span> km/h</div>
                    <div>TIME: <span id="time-val">0.0</span>s</div>
                </div>

                <div id="item-notification"></div>
            </div>

            <!-- ... result and failure screens ... -->
            <!-- (‰øùÊåÅ) -->
            <div id="result-screen" class="screen hide">
                <h2 id="result-title">MISSION COMPLETE</h2>
                <div class="result-box">
                    <p>ÊàêÂäüÂ†±ÈÖ¨: $<span id="result-reward">0</span></p>
                    <div id="time-bonus-display" style="font-size: 0.9em; color: #0f0;"></div>
                    <p>ÂèñÂæó„Ç¢„Ç§„ÉÜ„É†:</p>
                    <ul id="result-items"></ul>
                </div>
                <button onclick="engine.finishResult()">Êã†ÁÇπ„Å∏Êàª„Çã</button>
            </div>

            <div id="failure-screen" class="screen hide">
                <h2 style="color: #ff416c;">MISSION FAILED</h2>
                <div class="result-box">
                    <p id="failure-reason">Ëç∑Áâ©„ÅåÂ§ßÁ†¥„Åó„Åæ„Åó„Åü</p>
                    <p>„Éö„Éä„É´„ÉÜ„Ç£: $<span id="failure-penalty">0</span></p>
                </div>
                <button onclick="engine.changeState(GAME_STATE.MENU)">Êàª„Çã</button>
            </div>
        </div>

        <!-- Âè≥„Éë„Éç„É´ÔºöÁµ±Ë®à„ÉªÊ©ü‰Ωì„Çπ„ÉÜ„Éº„Çø„Çπ -->
        <div id="gui-right-panel" class="side-panel">
            <div class="panel-header">SHIP STATS</div>
            <div class="panel-content">
                <div class="stat-row">Max Speed: <span id="max-speed-val" class="val">0</span></div>
                <div class="stat-row">Accel: <span id="accel-val" class="val">0</span></div>
                <div class="stat-row">Weapon: <span id="weapon-val" class="val">0</span></div>
                <div class="stat-row">Brake: <span id="brake-val" class="val">0</span></div>
            </div>
        </div>
    </div>
    </div>

    <!-- „Çπ„ÇØ„É™„Éó„ÉàË™≠„ÅøËæº„Åø -->
    <script src="js/settings_data.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/saveManager.js"></script>
    <script src="js/missionManager.js"></script>
    <script src="js/gridManager.js"></script>
    <script src="js/upgradeManager.js"></script>
    <script src="js/soundManager.js"></script>
    <script src="js/engine.js"></script>
</body>

</html>